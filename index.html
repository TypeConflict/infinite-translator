<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç„¡ç”¨ç¿»è­¯å™¨</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        textarea { width: 80%; height: 100px; margin: 10px; }
        button { padding: 10px 20px; margin: 10px; }
        .result { margin-top: 20px; font-weight: bold; white-space: pre-line; }
    </style>
</head>
<body>
    <h1>ğŸ°ç„¡ç”¨ç¿»è­¯å™¨ğŸ°</h1>
    <p>è¼¸å…¥ä¸€æ®µä¸­æ–‡ï¼Œæˆ‘å€‘æœƒåœ¨éš¨æ©Ÿç¿»è­¯ 10 æ¬¡å¾Œç‚ºæ‚¨ç¿»è­¯æˆä¸­æ–‡ï¼:D</p>
    <textarea id="inputText" placeholder="è¼¸å…¥ä½ çš„æ–‡å­—..."></textarea><br>
    <button onclick="startTranslation()">é–‹å§‹ç¿»è­¯</button>
    <p class="result" id="resultText"></p>
    <script>
        const languages = ["zh", "en", "fr", "de", "ja", "es", "ru", "ko", "it", "pt", "nl", "pl", "sv"];

        async function translateText(text, from, to) {
            let url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`;
            
            try {
                let response = await fetch(url);
                let data = await response.json();
                return data[0]?.[0]?.[0] || text;
            } catch (error) {
                console.error("ç¿»è­¯éŒ¯èª¤ï¼š", error);
                return text; // å¦‚æœç¿»è­¯å¤±æ•—ï¼Œè¿”å›åŸæ–‡
            }
        }

        async function startTranslation() {
            let text = document.getElementById("inputText").value;
            if (!text.trim()) {
                alert("è«‹è¼¸å…¥æ–‡å­—ï¼");
                return;
            }

            let resultArea = document.getElementById("resultText");
            resultArea.innerHTML = "ç¿»è­¯ä¸­...\n";
            let originalText = text;
            let lastLang = "auto"; // åˆå§‹èªè¨€ç‚ºè‡ªå‹•è­˜åˆ¥

            for (let i = 0; i < 10; i++) {
                let toLang;
                do {
                    toLang = languages[Math.floor(Math.random() * languages.length)];
                } while (toLang === lastLang); // ç¢ºä¿ä¸æœƒç¿»å›åŒæ¨£çš„èªè¨€

                text = await translateText(text, lastLang, toLang);
                resultArea.innerHTML += `(${i + 1}/10) ${lastLang} â ${toLang}: ${text}\n`;
                lastLang = toLang; // è¨˜éŒ„ç•¶å‰ç¿»è­¯çš„èªè¨€ä½œç‚ºä¸‹ä¸€è¼ªçš„ä¾†æºèªè¨€

                await new Promise(resolve => setTimeout(resolve, 500)); // å¢åŠ ç¿»è­¯é–“éš”ï¼Œé˜²æ­¢ API å‡ºéŒ¯
            }

            // ç¢ºä¿æœ€å¾Œå…ˆç¿»å›è‹±èªï¼Œå†ç¿»å›ä¸­æ–‡ï¼Œæ¸›å°‘äº‚ç¢¼æƒ…æ³
            text = await translateText(text, lastLang, "en");
            text = await translateText(text, "en", "zh-TW");
            resultArea.innerHTML += `\næœ€çµ‚çµæœï¼š${text}`;
        }
    </script>
</body>
</html>
